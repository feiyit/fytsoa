@page "/search"
@using FytSoa.Application.Cms
@using FytSoa.Common.Result
@inject CmsArticleService _articleService
@{
var key = Request.Query["q"];
  var column = Site.Columns;
  ViewData["Title"] = "搜索_" + Site.CurrentSite.SeoTitle;
  ViewData["Key"] = Site.CurrentSite.SeoKey;
  ViewData["Desc"] = Site.CurrentSite.SeoDescribe;

  var list = new PageResult<CmsArticleDto>();
  list = await _articleService.PagesAsync(new CmsArticleParam() { Limit = 15, Page = 1, Key = key });
}
<!-- 搜索结果 Hero -->
<section class="relative bg-gray-950 text-white overflow-hidden pt-32 pb-24 lg:pt-40 lg:pb-28 border-b border-gray-800/60">
  <div class="absolute inset-0">
  <img src="@("/upload/images/photo-1617900906639-cab7adceb499_1767760968.jpeg".UrlReplace())" alt="利鑫集团总部与城市天际线" class="w-full h-full object-cover opacity-40">
    <div class="absolute inset-0 bg-gradient-to-r from-gray-950 via-gray-950/90 to-gray-900/60"></div>
  </div>
  <div class="container mx-auto px-4 relative z-10">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12 items-end">
      <div class="lg:col-span-7">
        <p class="text-sm font-bold tracking-[0.3em] text-primary uppercase mb-4">SEARCH RESULTS</p>
        <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4">
          搜索结果
        </h1>
        <p class="max-w-xl text-sm leading-relaxed">
          当前展示与关键词
          <span id="search-query-text" class="font-semibold text-primary">@key</span>
          相关的集团信息、新闻动态与业务版块内容。您可以通过再次搜索进一步缩小范围。
        </p>
      </div>
      <div class="lg:col-span-5 mt-8 lg:mt-0">
        <form action="/search" method="get" class="w-full max-w-xl lg:ml-auto">
          <div
            class="flex items-center bg-white/95 rounded-full shadow-[0_18px_46px_rgba(15,23,42,0.16)] border border-gray-200 px-5 md:px-7 py-3 md:py-3.5">
                    <span class="text-gray-400 mr-3">
                      <i class="fas fa-search"></i>
                    </span>
            <input id="search-input" name="q" type="text"
                   class="flex-1 bg-transparent border-0 outline-none text-sm placeholder-gray-400 focus:ring-0"
                   placeholder="请输入搜索关键词，如：地产、社会责任...">
            <button type="submit"
                    class="ml-3 inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-primary text-white text-sm font-semibold hover:bg-[#8e2320] transition-colors">
              搜索
              <i class="fas fa-arrow-right text-xs"></i>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<!-- 搜索结果列表 -->
<section class="py-16 lg:py-20 bg-white">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-10 lg:gap-16">
      <!-- 左侧聚合信息 -->
      <aside class="lg:col-span-3">
        <div
          class="bg-gray-50 rounded-3xl border border-gray-100 p-5 shadow-[0_18px_46px_rgba(15,23,42,0.06)]">
          <h2 class="text-sm font-bold tracking-[0.3em] text-primary uppercase mb-3">FILTER SUMMARY</h2>
          <p class="text-xs text-gray-500 leading-relaxed mb-4">
            为您找到若干与
            <span id="search-summary-text" class="font-semibold text-gray-900">@key</span>
            相关的结果，覆盖新闻中心等维度。
          </p>
          <div class="mt-6 pt-5 border-t border-gray-100 text-xs text-gray-500 space-y-3">
            <div class="flex items-center gap-2">
              <i class="fas fa-phone-alt text-primary text-sm mt-0.5"></i>
              <span>集团总机：@Site.CurrentSite.CompanyTel</span>
            </div>
            <div class="flex items-center gap-2">
              <i class="fas fa-location-dot text-primary text-sm mt-0.5"></i>
              <span>@Site.CurrentSite.CompanyAddress</span>
            </div>
            <div class="flex items-center gap-2">
              <i class="fas fa-envelope text-primary text-sm"></i>
              <span>商务合作：@Site.CurrentSite.CompanyEmail</span>
            </div>
          </div>
        </div>
      </aside>

      <!-- 右侧结果列表 -->
      <div class="lg:col-span-9">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-xl md:text-2xl font-bold text-gray-900">
            搜索结果列表
          </h2>
          
        </div>

        <div class="space-y-6">
          @(list.Items.Count==0?"暂无搜索结果，请更换关键字":"")
          @foreach (var item in list.Items)
          {
            <article
              class="bg-white rounded-2xl border border-gray-100 p-5 md:p-6 shadow-sm hover:shadow-lg transition-shadow">
              <div class="flex flex-wrap items-center gap-3 text-xs text-gray-400 mb-2">
                <span
                  class="inline-flex items-center py-0.5 rounded-full bg-primary/10 text-primary font-semibold pl-0 pr-2">
                  @item.ColumnName
                </span>
                <span><i class="far fa-calendar-alt mr-1"></i>@item.PublishTime.ToShortDateString()</span>
                <span class="w-8 h-[1px] bg-gray-200"></span>
                <span>来源：@item.Source</span>
              </div>
              <h3 class="text-base md:text-lg font-semibold text-gray-900 mb-2">
                @item.Title
              </h3>
              <p class="text-sm text-gray-600 leading-relaxed mb-3 line-clamp-2">
                @item.Summary
              </p>
              <a href="/news-detail/@item.Id"
                 class="inline-flex items-center gap-2 text-xs font-semibold text-primary hover:text-primary/80">
                查看详情
                <i class="fas fa-arrow-right text-[10px]"></i>
              </a>
            </article>
          }
        </div>
      </div>
    </div>
  </div>
</section>