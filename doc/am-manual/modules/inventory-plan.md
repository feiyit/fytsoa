# 盘点计划（盘点任务与结果）

盘点的目的：让“系统记录”与“现场实物”一致，发现并处理差异（盘亏/盘盈/地点不符/责任人不符）。

## 1) 你在这里要做什么

- 创建盘点计划：定义盘点范围、执行人、计划时间
- 生成盘点明细：确定本次盘点涉及哪些资产
- 执行盘点：扫码或手工录入盘点结果
- 汇总差异：导出差异清单，推动整改或做库存调整单据（如果你们有该流程）

## 2) 盘点计划字段（常用）

| 字段 | 含义 |
|---|---|
| 盘点编号（PlanNo） | 盘点计划编号 |
| 盘点名称（Name） | 计划名称 |
| 盘点范围（ScopeJson） | 范围配置（地点/部门/分类/仓库等） |
| 执行人（AssigneeIdsJson） | 执行人列表 |
| 状态（Status） | 0草稿/1进行中/2已完成/3已取消 |
| 开始/结束时间（StartTime/EndTime） | 计划窗口 |
| 备注（Remark） | 说明 |

## 3) 盘点明细/结果（常用）

盘点明细以“资产”为维度，记录系统预期信息与实际信息：

- 资产Id
- 系统地点（ExpectedLocationId） vs 盘点地点（ActualLocationId）
- 系统责任人（ExpectedCustodianId） vs 盘点责任人（ActualCustodianId）
- 结果（Result）
  - 0=正常
  - 1=未盘到
  - 2=盘盈（新增）
  - 3=盘亏
  - 4=地点不符
  - 5=责任人不符
- 盘点时间（ScanTime）、盘点人（ScanUserId）、备注

## 4) 推荐流程

```mermaid
flowchart LR
  A[创建盘点计划(草稿)] --> B[生成明细/确认范围]
  B --> C[开始盘点(进行中)]
  C --> D[扫码/录入结果]
  D --> E[汇总差异]
  E --> F[整改/补录/复盘]
  F --> G[完成盘点(已完成)]
```

## 5) 与其它模块的关系

- 资产台账：盘点范围与盘点明细来自资产台账
- 单据管理：盘点差异可能需要生成“盘盈盘亏/库存调整（INV_ADJUST）”单据（看你们制度）
- 资产留痕：盘点计划与扫码/录入结果可写入留痕（BizType=INVENTORY，Operation=CREATE/UPDATE/SCAN 等）

